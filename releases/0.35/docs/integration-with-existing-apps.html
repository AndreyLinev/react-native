<!DOCTYPE html><html><head><title>Интеграция с приложениями</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><meta property="fb:app_id" content="1677033832619985"><meta property="fb:admins" content="121800083"><meta property="og:site_name" content="React Native"><meta property="og:title" content="Интеграция с приложениями"><meta property="og:url" content="https://github.com/egeshi/react-native/index.html"><meta property="og:image" content="https://github.com/egeshi/react-native/img/opengraph.png"><meta property="og:description" content="Фреймворк для разработки нативных мобильных приложений на React"><meta name="twitter:site" content="@antonyrepin"><meta name="twitter:card" content="summary_large_image"><meta property="og:type" content="website"><base href="/react-native/releases/0.35/"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="shortcut icon" href="img/favicon.png?2"><link rel="stylesheet" href="css/react-native.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, "script", "twitter-wjs"));</script><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href=""><img src="img/header_logo.png">React Native</a><a class="nav-version" href="/react-native/versions.html">0.35</a><div class="nav-site-wrapper"><ul class="nav-site nav-site-internal"><li><a href="docs/getting-started.html" class="active" data-target=".nav-docs">Документация</a></li><li><a href="/react-native/support.html" class="">Помощь</a></li><li><a href="/react-native/showcase.html" class="">Выставка</a></li><li><a href="/react-native/blog/" class="">Блог</a></li></ul><div class="algolia-search-wrapper"><input id="algolia-doc-search" tabindex="0" type="text" placeholder="Поиск..."></div><ul class="nav-site nav-site-external"><li><a href="https://github.com/egeshi/react-native" class="">GitHub</a></li><li><a href="http://facebook.github.io/react" class="">React</a></li></ul></div></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-viewport"><div class="nav-docs-section"><h3>Основы</h3><ul><li><a style="margin-left:0;" class="" href="docs/getting-started.html">Поехали!</a></li><li><a style="margin-left:0;" class="" href="docs/tutorial.html">Первый урок</a></li><li><a style="margin-left:0;" class="" href="docs/props.html">Свойства</a></li><li><a style="margin-left:0;" class="" href="docs/state.html">Состояние</a></li><li><a style="margin-left:0;" class="" href="docs/style.html">Стили</a></li><li><a style="margin-left:0;" class="" href="docs/height-and-width.html">Высота и ширина</a></li><li><a style="margin-left:0;" class="" href="docs/flexbox.html">Разметка Flexbox</a></li><li><a style="margin-left:0;" class="" href="docs/handling-text-input.html">Ввод текста</a></li><li><a style="margin-left:0;" class="" href="docs/using-a-scrollview.html">Использование ScrollView</a></li><li><a style="margin-left:0;" class="" href="docs/using-a-listview.html">Использование ListView</a></li><li><a style="margin-left:0;" class="" href="docs/network.html">Сетевые данные</a></li><li><a style="margin-left:0;" class="" href="docs/using-navigators.html">Навигаторы</a></li><li><a style="margin-left:0;" class="" href="docs/more-resources.html">Другие ресурсы</a></li></ul><div class="nav-docs-section"><h3>Поддержите переводчика</h3><p>Ребята, на сайте нет рекламы, я не работаю на Facebook и не имею спонсоров кроме вас ;) Не стесняйтесь! Сумму вы можете указать сами в поле формы ниже.<br>Благодарю за вашу поддержку!</p><div><iframe src="https://funding.webmoney.ru/widgets/vertical/15512811-ff28-45b6-ae5d-85b0a7ea9638?hc=1&amp;hs=1&amp;sum=50" width="240" height="190" scrolling="no" style="border:none;"></iframe></div></div></div><div class="nav-docs-section"><h3>Руководства</h3><ul><li><a style="margin-left:0;" class="active" href="docs/integration-with-existing-apps.html">Интеграция с приложениями</a></li><li><a style="margin-left:0;" class="" href="docs/colors.html">Цвета</a></li><li><a style="margin-left:0;" class="" href="docs/images.html">Изображения</a></li><li><a style="margin-left:0;" class="" href="docs/handling-touches.html">Нажатия</a></li><li><a style="margin-left:0;" class="" href="docs/animations.html">Анимация</a></li><li><a style="margin-left:0;" class="" href="docs/accessibility.html">Специальные возможности</a></li><li><a style="margin-left:0;" class="" href="docs/timers.html">Таймеры</a></li><li><a style="margin-left:0;" class="" href="docs/direct-manipulation.html">Непосредственная манипуляция</a></li><li><a style="margin-left:0;" class="" href="docs/debugging.html">Устранение ошибок</a></li><li><a style="margin-left:0;" class="" href="docs/testing.html">Тестирование</a></li><li><a style="margin-left:0;" class="" href="docs/javascript-environment.html">Среда JavaScript</a></li><li><a style="margin-left:0;" class="" href="docs/navigation.html">Навигация</a></li><li><a style="margin-left:0;" class="" href="docs/performance.html">Производительность</a></li><li><a style="margin-left:0;" class="" href="docs/upgrading.html">Новые версии</a></li><li><a style="margin-left:0;" class="" href="docs/platform-specific-code.html">Платформозавимимый код</a></li><li><a style="margin-left:0;" class="" href="docs/gesture-responder-system.html">Определение жестов</a></li></ul></div><div class="nav-docs-section"><h3>Руководства (iOS)</h3><ul><li><a style="margin-left:0;" class="" href="docs/native-modules-ios.html">Нативные модули</a></li><li><a style="margin-left:0;" class="" href="docs/native-components-ios.html">Нативные компоненты UI</a></li><li><a style="margin-left:0;" class="" href="docs/linking-libraries-ios.html">Привязка библиотек</a></li><li><a style="margin-left:0;" class="" href="docs/running-on-device-ios.html">Запуск на устройстве</a></li><li><a style="margin-left:0;" class="" href="docs/running-on-simulator-ios.html">Запуск на симуляторе</a></li><li><a style="margin-left:0;" class="" href="docs/communication-ios.html">Коммуникация нативного и React Native</a></li></ul></div><div class="nav-docs-section"><h3>Руководства (Android)</h3><ul><li><a style="margin-left:0;" class="" href="docs/native-modules-android.html">Нативные модули</a></li><li><a style="margin-left:0;" class="" href="docs/native-components-android.html">Нативные компоненты UI</a></li><li><a style="margin-left:0;" class="" href="docs/running-on-device-android.html">Запуск на устройстве</a></li><li><a style="margin-left:0;" class="" href="docs/signed-apk-android.html">Создание подписанного APK</a></li><li><a style="margin-left:0;" class="" href="docs/android-ui-performance.html">Производительность Android UI</a></li><li><a style="margin-left:0;" class="" href="docs/android-building-from-source.html">Сборка React Native из исходного кода</a></li></ul></div><div class="nav-docs-section"><h3>components</h3><ul><li><a style="margin-left:0;" class="" href="docs/activityindicator.html">ActivityIndicator</a></li><li><a style="margin-left:0;" class="" href="docs/activityindicatorios.html">ActivityIndicatorIOS</a></li><li><a style="margin-left:0;" class="" href="docs/datepickerios.html">DatePickerIOS</a></li><li><a style="margin-left:0;" class="" href="docs/drawerlayoutandroid.html">DrawerLayoutAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/image.html">Image</a></li><li><a style="margin-left:0;" class="" href="docs/keyboardavoidingview.html">KeyboardAvoidingView</a></li><li><a style="margin-left:0;" class="" href="docs/listview.html">ListView</a></li><li><a style="margin-left:0;" class="" href="docs/mapview.html">MapView</a></li><li><a style="margin-left:0;" class="" href="docs/modal.html">Modal</a></li><li><a style="margin-left:0;" class="" href="docs/navigator.html">Navigator</a></li><li><a style="margin-left:0;" class="" href="docs/navigatorios.html">NavigatorIOS</a></li><li><a style="margin-left:0;" class="" href="docs/picker.html">Picker</a></li><li><a style="margin-left:0;" class="" href="docs/pickerios.html">PickerIOS</a></li><li><a style="margin-left:0;" class="" href="docs/progressbarandroid.html">ProgressBarAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/progressviewios.html">ProgressViewIOS</a></li><li><a style="margin-left:0;" class="" href="docs/refreshcontrol.html">RefreshControl</a></li><li><a style="margin-left:0;" class="" href="docs/scrollview.html">ScrollView</a></li><li><a style="margin-left:0;" class="" href="docs/segmentedcontrolios.html">SegmentedControlIOS</a></li><li><a style="margin-left:0;" class="" href="docs/slider.html">Slider</a></li><li><a style="margin-left:0;" class="" href="docs/sliderios.html">SliderIOS</a></li><li><a style="margin-left:0;" class="" href="docs/statusbar.html">StatusBar</a></li><li><a style="margin-left:0;" class="" href="docs/snapshotviewios.html">SnapshotViewIOS</a></li><li><a style="margin-left:0;" class="" href="docs/switch.html">Switch</a></li><li><a style="margin-left:0;" class="" href="docs/switchandroid.html">SwitchAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/switchios.html">SwitchIOS</a></li><li><a style="margin-left:0;" class="" href="docs/tabbarios.html">TabBarIOS</a></li><li><a style="margin-left:0;" class="" href="docs/tabbarios-item.html">TabBarIOS.Item</a></li><li><a style="margin-left:0;" class="" href="docs/text.html">Text</a></li><li><a style="margin-left:0;" class="" href="docs/textinput.html">TextInput</a></li><li><a style="margin-left:0;" class="" href="docs/toolbarandroid.html">ToolbarAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/touchablehighlight.html">TouchableHighlight</a></li><li><a style="margin-left:0;" class="" href="docs/touchablenativefeedback.html">TouchableNativeFeedback</a></li><li><a style="margin-left:0;" class="" href="docs/touchableopacity.html">TouchableOpacity</a></li><li><a style="margin-left:0;" class="" href="docs/touchablewithoutfeedback.html">TouchableWithoutFeedback</a></li><li><a style="margin-left:0;" class="" href="docs/view.html">View</a></li><li><a style="margin-left:0;" class="" href="docs/viewpagerandroid.html">ViewPagerAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/webview.html">WebView</a></li></ul></div><div class="nav-docs-section"><h3>apis</h3><ul><li><a style="margin-left:0;" class="" href="docs/actionsheetios.html">ActionSheetIOS</a></li><li><a style="margin-left:0;" class="" href="docs/adsupportios.html">AdSupportIOS</a></li><li><a style="margin-left:0;" class="" href="docs/alert.html">Alert</a></li><li><a style="margin-left:0;" class="" href="docs/alertios.html">AlertIOS</a></li><li><a style="margin-left:0;" class="" href="docs/animated.html">Animated</a></li><li><a style="margin-left:0;" class="" href="docs/appregistry.html">AppRegistry</a></li><li><a style="margin-left:0;" class="" href="docs/appstate.html">AppState</a></li><li><a style="margin-left:0;" class="" href="docs/asyncstorage.html">AsyncStorage</a></li><li><a style="margin-left:0;" class="" href="docs/backandroid.html">BackAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/cameraroll.html">CameraRoll</a></li><li><a style="margin-left:0;" class="" href="docs/clipboard.html">Clipboard</a></li><li><a style="margin-left:0;" class="" href="docs/datepickerandroid.html">DatePickerAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/dimensions.html">Dimensions</a></li><li><a style="margin-left:0;" class="" href="docs/easing.html">Easing</a></li><li><a style="margin-left:0;" class="" href="docs/geolocation.html">Geolocation</a></li><li><a style="margin-left:0;" class="" href="docs/imageeditor.html">ImageEditor</a></li><li><a style="margin-left:0;" class="" href="docs/imagepickerios.html">ImagePickerIOS</a></li><li><a style="margin-left:0;" class="" href="docs/imagestore.html">ImageStore</a></li><li><a style="margin-left:0;" class="" href="docs/intentandroid.html">IntentAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/interactionmanager.html">InteractionManager</a></li><li><a style="margin-left:0;" class="" href="docs/layoutanimation.html">LayoutAnimation</a></li><li><a style="margin-left:0;" class="" href="docs/linking.html">Linking</a></li><li><a style="margin-left:0;" class="" href="docs/nativemethodsmixin.html">NativeMethodsMixin</a></li><li><a style="margin-left:0;" class="" href="docs/nativemodules.html">NativeModules</a></li><li><a style="margin-left:0;" class="" href="docs/netinfo.html">NetInfo</a></li><li><a style="margin-left:0;" class="" href="docs/panresponder.html">PanResponder</a></li><li><a style="margin-left:0;" class="" href="docs/permissionsandroid.html">PermissionsAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/pixelratio.html">PixelRatio</a></li><li><a style="margin-left:0;" class="" href="docs/pushnotificationios.html">PushNotificationIOS</a></li><li><a style="margin-left:0;" class="" href="docs/settings.html">Settings</a></li><li><a style="margin-left:0;" class="" href="docs/statusbarios.html">StatusBarIOS</a></li><li><a style="margin-left:0;" class="" href="docs/stylesheet.html">StyleSheet</a></li><li><a style="margin-left:0;" class="" href="docs/systrace.html">Systrace</a></li><li><a style="margin-left:0;" class="" href="docs/timepickerandroid.html">TimePickerAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/toastandroid.html">ToastAndroid</a></li><li><a style="margin-left:0;" class="" href="docs/vibration.html">Vibration</a></li><li><a style="margin-left:0;" class="" href="docs/vibrationios.html">VibrationIOS</a></li><li><a style="margin-left:0;" class="" href="docs/layout-props.html">Layout Props</a></li><li><a style="margin-left:0;" class="" href="docs/shadow-props.html">Shadow Props</a></li></ul></div></div></div><div class="inner-content"><a id="content"></a><h1><a class="anchor" name=""></a>Интеграция с приложениями <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h1><div><span><div class="integration-toggler">
<style>
.integration-toggler a {
  display: inline-block;
  padding: 10px 5px;
  margin: 2px;
  border: 1px solid #05A5D1;
  border-radius: 3px;
  text-decoration: none !important;
}
.display-platform-objc .integration-toggler .button-objc,
.display-platform-swift .integration-toggler .button-swift,
.display-platform-android .integration-toggler .button-android {
  background-color: #05A5D1;
  color: white;
}
block { display: none; }
.display-platform-objc .objc,
.display-platform-swift .swift,
.display-platform-android .android {
  display: block;
}</style>
<span>Platform:</span>
<a href="javascript:void(0);" class="button-objc" onclick="display('platform', 'objc')">Objective-C</a>
<a href="javascript:void(0);" class="button-swift" onclick="display('platform', 'swift')">Swift</a>
<a href="javascript:void(0);" class="button-android" onclick="display('platform', 'android')">Android</a>
</div>

</span><span><block class="android" />

</span><blockquote><p>Этот раздел будет вскоре обновлен чтобы показать интеграцию более приближенного к реальному приложения, такого как мобильное приложение 2048, которое использовалось для Objective-C и Swift.</p></blockquote><span><block class="objc swift android" />

</span><h2><a class="anchor" name=""></a>Ключевые понятия <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>React Native отлично поддходит для разработки новых мобильных приложений с нуля. Однако он также хорошо подходит для добавление нового представления или user flow к существующим нативным приложениям. За несколько шагов можно добавить новый функционал, разработанный на React Native, а также экраны, представления и т.д.</p><span><block class="objc swift" />

</span><p>Основные шаги для интеграции компонентов React Native в ваше приложение iOS:</p><ol><li>Определитесь какие компоненты React Native вы хотите интегрировать.</li><li>Создайте <code>Podfile</code>, содержащий <code>subspec</code> для всех компонентов React Native, которые потребуются вам для интеграции.</li><li>Создайте свои компоненты React Native на JavaScript.</li><li>Добавьте новый обработчик событий, который создаст <code>RCTRootView</code>, который указывает на ваш компонент React Native и его имя <code>AppRegistry</code>, которое вы указали в <code>index.ios.js</code>.</li><li>Запустите сервер React Native и ваше нативное приложение.</li><li>Если нужно, добавьте другие компоненты React Native.</li><li>Исправьте все недочёты с помощью <a href="/react-native/releases/next/docs/debugging.html" target="">отладки</a>.</li><li>Подготовьте <a href="/react-native/docs/running-on-device-ios.html" target="">деплой</a> (например с помощью скрипта <code>react-native-xcode.sh</code>).</li><li>Зарабатывайте!</li></ol><span><block class="android" />

</span><p>Основные шаги для интеграции компонентов React Native в ваше приложение Android:</p><ol><li>Определитесь какие компоненты React Native вы хотите интегрировать.</li><li>Установите <code>react-native</code> в корневой каталог вашего приложения Android. Вы увидите каталог <code>node_modules/</code>.</li><li>Создайте свои компоненты React Native на JavaScript.</li><li>Добавьте <code>com.facebook.react:react-native:+</code> и <code>maven</code> в ваш файл <code>build.gradle</code> с указанием на двоичные файлы <code>react-native</code>, расположенные в директории <code>node_nodules/</code>.</li><li>Создайте свою <code>Activity</code>, которая создает <code>ReactRootView</code>.</li><li>Запустите сервер React Native и ваше нативное приложение.</li><li>Если нужно, добавьте другие компоненты React Native.</li><li>Исправьте все недочёты с помощью <a href="/react-native/releases/next/docs/debugging.html" target="">отладки</a>.</li><li><a href="/react-native/releases/next/docs/signed-apk-android.html" target="">Подготовьте</a> <a href="/react-native/docs/running-on-device-android.html" target="">деплой</a>.</li><li>Зарабатывайте!</li></ol><span><block class="objc swift android" />

</span><h2><a class="anchor" name=""></a>Зависимости <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><span><block class="android" />

</span><p>Выполнив примеры из урока <a href="/react-native/docs/getting-started.html" target="">Как начать с Android</a> , вы установите соответствующие зависимости (например, <code>npm</code>) для React Native, платформы Android и вашей излюбленной среды разработки.</p><span><block class="objc swift" />

</span><h3><a class="anchor" name=""></a>Основные <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h3><p>В качестве первого шага изучите руководство <a href="/react-native/docs/getting-started.html" target="">Знакомство с React Native</a> для вашей среды разработки и целевой платформы iOS, чтобы установить необходимые для React Native зависимости.</p><h3><a class="anchor" name="cocoapods"></a>CocoaPods <a class="hash-link" href="docs/integration-with-existing-apps.html#cocoapods">#</a></h3><p><a href="http://cocoapods.org" target="_blank">CocoaPods</a> - менеджер пакетов для разработки на Mac и iOS. Он используется чтобы добавить актуальный код платформы React Native в ваш проект.</p><div class="prism language-javascript">$ sudo gem install cocoapods</div><blockquote><p>Технически, можно не использовать CocoaPods, но при этом вам потребуется устаноить библиотеки и дополнения компоновщика вручную, что чрезмерно усложнит этот процесс.</p></blockquote><h2><a class="anchor" name=""></a>Демонстрационное мобильное приложение <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><span><block class="objc" />

</span><p>Предположим что <a href="https://github.com/JoelMarcey/iOS-2048" target="_blank">мобильное приложение для интеграции</a> это игра <a href="https://en.wikipedia.org/wiki/2048_(video_game" target="_blank">2048</a>). Вот так выглядит главное меню нативного приложения без использования React Native.</p><span><block class="swift" />

</span><p>Предположим что <a href="https://github.com/JoelMarcey/swift-2048" target="_blank">мобильное приложение для интеграции</a> это игра <a href="https://en.wikipedia.org/wiki/2048_(video_game" target="_blank">2048</a>. Вот так выглядит главное меню нативного приложения без использования React Native.</p><span><block class="objc swift" />

</span><p><img src="img/react-native-existing-app-integration-ios-before.png" alt="До интеграции RN"></p><h2><a class="anchor" name=""></a>Зависимости <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>Для интеграция с React Native требуются React и модули nodejs React Native. Платформа React Native предоставит код, с помощью которого осуществляется интеграции вашего приложения.</p><h3><a class="anchor" name="package-json"></a><code>package.json</code> <a class="hash-link" href="docs/integration-with-existing-apps.html#package-json">#</a></h3><p>В файл <code>package.json</code> мы добавим зависимости пакета. Создайте этот файл в корневой директории вашего проекта если его там еще нет.</p><blockquote><p>Обычно при работе с проектами React Native вы разместите такие файлы как <code>package.json</code>, <code>index.ios.js</code> и т.д. в корневом каталоге вашего проекта, а затем расположите нативный код iOS в подкаталоге <code>ios/</code> в папке проекта Xcode (например, <code>.xcodeproj</code>).</p></blockquote><p>Ниже указан пример пример файла <code>package.json</code>, содержащего минимальную конфигурацию.</p><blockquote><p>Номера версий могут менятся в зависимости от ваших потребностей. Но в большинстве случаев будет достаточно последних версий <a href="https://github.com/facebook/react/releases" target="_blank">React</a> и <a href="https://github.com/facebook/react/releases" target="_blank">React Native</a>.</p></blockquote><span><block class="objc" />

</span><div class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;NumberTileGame&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;node node_modules/react-native/local-cli/cli.js start&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;react&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;15.0.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;0.26.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></div><span><block class="swift" />

</span><div class="prism language-javascript"><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;swift-2048&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;node node_modules/react-native/local-cli/cli.js start&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;react&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;15.0.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;0.26.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></div><span><block class="objc swift" />

</span><h3><a class="anchor" name=""></a>Установка пакетов <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h3><p>Установите React и модули React Native с помощью менеджера пакетов Node. Модули Node будут установлены в каталог <code>node_modules/</code> в корневой директории вашего проекта.</p><div class="prism language-javascript"># From the directory containing package<span class="token punctuation">.</span>json project<span class="token punctuation">,</span> install the modules
# The modules will be installed <span class="token keyword">in</span> node_modules<span class="token operator">/</span>
$ npm install</div><h2><a class="anchor" name="react-native"></a>Платформа React Native <a class="hash-link" href="docs/integration-with-existing-apps.html#react-native">#</a></h2><p>Вы <a href="#package-dependencies" target="">уже установили</a> платформу React Native в виде модуля Node в вашем проекте. Теперь мы установим CocoaPods <code>Podfile</code> с дополнительными компонентами.</p><h3><a class="anchor" name="subspecs"></a>Subspecs <a class="hash-link" href="docs/integration-with-existing-apps.html#subspecs">#</a></h3><p>Перед тем как интегрировать React Native в свое приложение, определитесь какие компоненты платформы React Native потребуются для вашего проекта. На этом этапе появляются <code>subspec</code>. При создании <code>Podfile</code>, вы указываете зависимости библиотек React Native, которые установите для того чтобы ваше приложение могло пользоваться ими. Каждая библиотека указывается в <code>Podfile</code> как <code>subspec</code>.</p><p>Список поддерживаемых <code>subspec</code> находится в файле <a href="https://github.com/facebook/react-native/blob/master/React.podspec" target="_blank"><code>node_modules/react-native/React.podspec</code></a>. Они обычно называются соответственно функциональности. Например, вам всегда понадобится <code>subspec</code> <code>Core</code>. Она предоставит вам <code>AppRegistry</code>, <code>StyleSheet</code>, <code>View</code> и другие базовые библиотеки React Native. Если вы захотите добавить библиотеку <code>Text</code> (например, для элементов <code>&lt;Text&gt;</code>), то вам потребуется <code>subspec</code> <code>RCTText</code>. Если вы захотите добавить библиотеку <code>Image</code> (например, для элементов <code>&lt;Image&gt;</code>), то вам потребуется <code>subspec</code> <code>RCTImage</code>.</p><h4><a class="anchor" name="podfile"></a>Podfile <a class="hash-link" href="docs/integration-with-existing-apps.html#podfile">#</a></h4><p>После того как вы установили React и компоненты React Native в директорию <code>node_modules</code> с помощью Node и выбрали, какие элементы React Native вам требуется интегрировать, можете создать свой <code>Podfile</code> чтобы установить эти компоненты для использования в вашем приложении.</p><p>Проще всего создать <code>Podfile</code> это использовать команду <code>init</code> CocoaPods в каталоге нативного кода iOS в вашем проекте:</p><div class="prism language-javascript">## В директории<span class="token punctuation">,</span> где расположен ваш нативный код iOS <span class="token punctuation">(</span>например<span class="token punctuation">,</span> где находится файл `<span class="token punctuation">.</span>xcodeproj`<span class="token punctuation">)</span>
$ pod init</div><p><code>Podfile</code> будет создан и расположится в каталоге <em>iOS</em> (например, <code>ios/</code>) вашего проекта и будет содержать базовую установку, которую можно настроить под ваши конктретные нужды. В итоге <code>Podfile</code> должен выглядеть как-то так:</p><span><block class="objc" />

</span><div class="prism language-javascript"># Target это скорее всего это название вашего проекта<span class="token punctuation">.</span>
target <span class="token string">&#x27;NumberTileGame&#x27;</span> <span class="token keyword">do</span>

  # Директория <span class="token string">&#x27;node_modules&#x27;</span> вероятно расположена в корневой папке вашего проекта<span class="token punctuation">,</span>
  # но если она находится не там<span class="token punctuation">,</span> измените `<span class="token punctuation">:</span>path` соответственно
  pod <span class="token string">&#x27;React&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">:</span>path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;../node_modules/react-native&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">:</span>subspecs <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token string">&#x27;Core&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;RCTText&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;RCTWebSocket&#x27;</span><span class="token punctuation">,</span> # нужно для отладки
    # Добавьте любые другие subspec<span class="token punctuation">,</span> которые вы  хотите использованть в своем проекте
  <span class="token punctuation">]</span>

end</div><span><block class="swift" />

</span><div class="prism language-javascript">source <span class="token string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span>

# Требуется для приложений Swift
platform <span class="token punctuation">:</span>ios<span class="token punctuation">,</span> <span class="token string">&#x27;8.0&#x27;</span>
use_frameworks<span class="token operator">!</span>

# Target это скорее всего это название вашего проекта<span class="token punctuation">.</span>
target <span class="token string">&#x27;swift-2048&#x27;</span> <span class="token keyword">do</span>

  # Директория <span class="token string">&#x27;node_modules&#x27;</span> вероятно расположена в корневой папке вашего проекта<span class="token punctuation">,</span>
  # но если она находится не там<span class="token punctuation">,</span> измените `<span class="token punctuation">:</span>path` соответственно
  pod <span class="token string">&#x27;React&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">:</span>path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;../node_modules/react-native&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">:</span>subspecs <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token string">&#x27;Core&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;RCTText&#x27;</span><span class="token punctuation">,</span>
    <span class="token string">&#x27;RCTWebSocket&#x27;</span><span class="token punctuation">,</span> # needed <span class="token keyword">for</span> debugging
    # Добавьте любые другие subspec<span class="token punctuation">,</span> которые вы  хотите использованть в своем проекте
  <span class="token punctuation">]</span>

end</div><span><block class="objc swift" />

</span><h4><a class="anchor" name="pod"></a>Установка Pod <a class="hash-link" href="docs/integration-with-existing-apps.html#pod">#</a></h4><p>После того, как вы создали <code>Podfile</code>, вы можете установить pod React Native.</p><div class="prism language-javascript">$ pod install</div><p>Вы должны увидеть такой вывод:</p><div class="prism language-javascript">Analyzing dependencies
Fetching podspec <span class="token keyword">for</span> `React` from `<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>node_modules<span class="token operator">/</span>react<span class="token operator">-</span>native`
Downloading dependencies
Installing React <span class="token punctuation">(</span><span class="token number">0.26</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
Generating Pods project
Integrating client project
Sending stats
Pod installation complete<span class="token operator">!</span> There are <span class="token number">3</span> dependencies from the Podfile and <span class="token number">1</span> total pod installed<span class="token punctuation">.</span></div><span><block class="swift" />

</span><blockquote><p>Если вы видите предупреждение &quot;<em>The <code>swift-2048 [Debug]</code> target overrides the <code>FRAMEWORK_SEARCH_PATHS</code> build setting defined in <code>Pods/Target Support Files/Pods-swift-2048/Pods-swift-2048.debug.xcconfig</code>. This can lead to problems with the CocoaPods installation</em>&quot;, убедитесь что настройка <code>Framework Search Paths</code> в меню <code>Build Settings</code> для режимов <code>Debug</code> и <code>Release</code> содержит только <code>$(inherited)</code>.</p></blockquote><span><block class="objc swift" />

</span><h2><a class="anchor" name=""></a>Интеграция кода <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>Теперь, когда у нас есть основа пакета, мы изменим нативное приложение чтобы интегрировать React Native в приложение. Для нашего мобильного приложения 2048 мы добавим экран &quot;High Score&quot; с помощью React Native.</p><h3><a class="anchor" name="react-native"></a>Компонент React Native <a class="hash-link" href="docs/integration-with-existing-apps.html#react-native">#</a></h3><p>Первые строки кода, которые мы напишем, являются реальным кодом React Native для нового экрана &quot;High Score&quot;,который будет интегрирован в наше приложение.</p><h4><a class="anchor" name="index-ios-js"></a>Создайте файл <code>index.ios.js</code> <a class="hash-link" href="docs/integration-with-existing-apps.html#index-ios-js">#</a></h4><p>Сначала создайте пустой файл <code>index.ios.js</code>. Для простоты мы создаем этот файл в корнвой директории проекта.</p><blockquote><p><code>index.ios.js</code> отправная точка для приложений React Native на iOS. Он требуется всегда. Это может быть небольшой файл, который <code>require</code> другие файлы, являющиеся частью вашего компонента React Native или приложения, или он может содержать весь код, который необходим вашему приложению. В нашем случае мы просто поместим весь код в файл <code>index.ios.js</code></p></blockquote><div class="prism language-javascript"># В корневой директории вашего проекта
$ touch index<span class="token punctuation">.</span>ios<span class="token punctuation">.</span>js</div><h4><a class="anchor" name="react-native"></a>Добавьте свой код React Native <a class="hash-link" href="docs/integration-with-existing-apps.html#react-native">#</a></h4><p>Создайте свой компонент в файле <code>index.ios.js</code>. В нашем образце мы добавим простой компонент <code>&lt;Text&gt;</code> в стилизованный компонент <code>&lt;View&gt;</code></p><div class="prism language-javascript"><span class="token string">&#x27;use strict&#x27;</span><span class="token punctuation">;</span>

import React from <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
import <span class="token punctuation">{</span>
  AppRegistry<span class="token punctuation">,</span>
  StyleSheet<span class="token punctuation">,</span>
  Text<span class="token punctuation">,</span>
  View
<span class="token punctuation">}</span> from <span class="token string">&#x27;react-native&#x27;</span><span class="token punctuation">;</span>

class <span class="token class-name">RNHighScores</span> extends <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> contents <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">&quot;scores&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map<span class="token punctuation">(</span></span>
      score <span class="token operator">=</span><span class="token operator">&gt;</span> &lt;Text key<span class="token operator">=</span><span class="token punctuation">{</span>score<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>score<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token punctuation">{</span>score<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">}</span>&lt;<span class="token operator">/</span>Text<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      &lt;View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        &lt;Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>highScoresTitle<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token number">2048</span> High Scores<span class="token operator">!</span>
        &lt;<span class="token operator">/</span>Text<span class="token operator">&gt;</span>
        &lt;Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>scores<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contents<span class="token punctuation">}</span>
        &lt;<span class="token operator">/</span>Text<span class="token operator">&gt;</span>
      &lt;<span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

const styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
    alignItems<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">&#x27;#FFFFFF&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  highScoresTitle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fontSize<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    textAlign<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
    margin<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  scores<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    textAlign<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token string">&#x27;#333333&#x27;</span><span class="token punctuation">,</span>
    marginBottom<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">
// Module name
</span>AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent<span class="token punctuation">(</span></span><span class="token string">&#x27;RNHighScores&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> RNHighScores<span class="token punctuation">)</span><span class="token punctuation">;</span></div><blockquote><p><code>RNHighScores</code> это название вашего модуля, которое будет использоваться для добавления представления в React Native из вашего приложения iOS.</p></blockquote><h2><a class="anchor" name="rctrootview"></a>Магия: <code>RCTRootView</code> <a class="hash-link" href="docs/integration-with-existing-apps.html#rctrootview">#</a></h2><p>Теперь, когда ваш компонент React Native создан в <code>index.ios.js</code>, нужно присоединить компонент к новому или существующему <code>ViewController</code>. Проще всего это сделать - создать дополнительный создать путь события к вашему компоненту и затем добавить этот компонент к существующему <code>ViewController</code>.</p><p>Мы свяжем наш компонент React Native с новым нативным представлением во <code>ViewController</code> который фактически будет содержать его, вызывая <code>RCTRootView</code> .</p><h3><a class="anchor" name=""></a>Создайте путь событи <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h3><p>В главное меню игры можно добавить новую ссылку для перехода на страницу &quot;High Score&quot;, созданную с помощью React Native.</p><p><img src="img/react-native-add-react-native-integration-link.png" alt="Путь события"></p><h4><a class="anchor" name=""></a>Обработчик события <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h4><p>Теперь мы добавим обработчик события к ссылке меню. Для этого к основному <code>ViewController</code> вашего приложения будет добавлен новый метод. Здесь главную роль играет <code>RCTRootView</code>.</p><p>Когда вы создаете приложение React Native, вы используете упаковщик React Native чтобы создать файл <code>index.ios.bundle</code>, который будет обслуживаться сервером React Native. Внутри <code>index.ios.bundle</code> будет расположен наш модуль <code>RNHighScore</code>. Таким образом, мы должны направить наш <code>RCTRootView</code> на расположение ресурса <code>index.ios.bundle</code> (через <code>NSURL</code>) и связать его с модулем.</p><p>Для упрощения отладки мобильного приложения, зарегистрируем тот факт что обработчик событий был вызван. Затем мы создадим строку с указанием расположения нашего кода React Native, который назодится в <code>index.ios.bundle</code>. Наконец, мы создадим основной <code>RCTRootView</code>. Обратите внимание на то как мы указываем <code>RNHighScores</code> как <code>moduleName</code> который мы создали <a href="#the-react-native-component" target="">ранее</a> при написании кода нашего компонента React Native.</p><span><block class="objc" />

</span><p>Сначала произведите <code>import</code> библиотеки <code>RCTRootView</code>.</p><div class="prism language-javascript">#import <span class="token string">&quot;RCTRootView.h&quot;</span></div><blockquote><p><code>initialProperties</code> указаны здесь в иллюстративных целях для того чтобы у нас были некоторые данные для нашего представления &quot;High Scores&quot;. Чтобы получить доступ к этим данным в нашем компоненте React Native, мы будем использовать <code>this.props</code>.</p></blockquote><div class="prism language-javascript"><span class="token operator">-</span> <span class="token punctuation">(</span>IBAction<span class="token punctuation">)</span>highScoreButtonPressed<span class="token punctuation">:</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>sender <span class="token punctuation">{</span>
    <span class="token function">NSLog<span class="token punctuation">(</span></span>@<span class="token string">&quot;High Score Button Pressed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    NSURL <span class="token operator">*</span>jsCodeLocation <span class="token operator">=</span> <span class="token punctuation">[</span>NSURL
                             URLWithString<span class="token punctuation">:</span>@<span class="token string">&quot;http://localhost:8081/index.ios.bundle?platform=ios&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    RCTRootView <span class="token operator">*</span>rootView <span class="token operator">=</span>
      <span class="token punctuation">[</span><span class="token punctuation">[</span>RCTRootView alloc<span class="token punctuation">]</span> initWithBundleURL <span class="token punctuation">:</span> jsCodeLocation
                           moduleName        <span class="token punctuation">:</span> @<span class="token string">&quot;RNHighScores&quot;</span>
                           initialProperties <span class="token punctuation">:</span>
                             @<span class="token punctuation">{</span>
                               @<span class="token string">&quot;scores&quot;</span> <span class="token punctuation">:</span> @<span class="token punctuation">[</span>
                                 @<span class="token punctuation">{</span>
                                   @<span class="token string">&quot;name&quot;</span> <span class="token punctuation">:</span> @<span class="token string">&quot;Alex&quot;</span><span class="token punctuation">,</span>
                                   @<span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span> @<span class="token string">&quot;42&quot;</span>
                                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                                 @<span class="token punctuation">{</span>
                                   @<span class="token string">&quot;name&quot;</span> <span class="token punctuation">:</span> @<span class="token string">&quot;Joel&quot;</span><span class="token punctuation">,</span>
                                   @<span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span> @<span class="token string">&quot;10&quot;</span>
                                 <span class="token punctuation">}</span>
                               <span class="token punctuation">]</span>
                             <span class="token punctuation">}</span>
                           launchOptions    <span class="token punctuation">:</span> nil<span class="token punctuation">]</span><span class="token punctuation">;</span>
    UIViewController <span class="token operator">*</span>vc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UIViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    vc<span class="token punctuation">.</span>view <span class="token operator">=</span> rootView<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>self presentViewController<span class="token punctuation">:</span>vc animated<span class="token punctuation">:</span>YES completion<span class="token punctuation">:</span>nil<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></div><blockquote><p>Обратите внимание что <code>RCTRootView initWithURL</code> запускает новую JSC VM. Чтобы оптимизировать использование ресурсов и упростить коммуникацию между представлениями React Native в различных частях вашего нативного мобильного приложения, вы можете использовать различные представления React Native, которые связаны с отдельной средой выполнения JS. Чтобы сделать это, используйте <a href="https://github.com/facebook/react-native/blob/master/React/Base/RCTBridge.h#L93" target="_blank"><code>RCTBridge initWithBundleURL</code></a> вместо <code>[RCTRootView alloc] initWithURL</code> чтобы создать мост, а затем используйте <code>RCTRootView initWithBridge</code>.</p></blockquote><span><block class="swift" />

</span><p>First <code>import</code> the <code>React</code> library.</p><div class="prism language-javascript">import React</div><blockquote><p><code>initialProperties</code>указаны здесь в иллюстративных целях для того чтобы у нас были некоторые данные для нашего представления &quot;High Scores&quot;. Чтобы получить доступ к этим данным в нашем компоненте React Native, мы будем использовать<code>this.props</code>.</p></blockquote><div class="prism language-javascript">@IBAction func <span class="token function">highScoreButtonTapped<span class="token punctuation">(</span></span>sender <span class="token punctuation">:</span> UIButton<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">NSLog<span class="token punctuation">(</span></span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> jsCodeLocation <span class="token operator">=</span> <span class="token function">NSURL<span class="token punctuation">(</span></span>string<span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:8081/index.ios.bundle?platform=ios&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> mockData<span class="token punctuation">:</span>NSDictionary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;scores&quot;</span><span class="token punctuation">:</span>
      <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;Alex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;42&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;Joel&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>

  <span class="token keyword">let</span> rootView <span class="token operator">=</span> <span class="token function">RCTRootView<span class="token punctuation">(</span></span>
      bundleURL<span class="token punctuation">:</span> jsCodeLocation<span class="token punctuation">,</span>
      moduleName<span class="token punctuation">:</span> <span class="token string">&quot;RNHighScores&quot;</span><span class="token punctuation">,</span>
      initialProperties<span class="token punctuation">:</span> mockData as <span class="token punctuation">[</span>NSObject <span class="token punctuation">:</span> AnyObject<span class="token punctuation">]</span><span class="token punctuation">,</span>
      launchOptions<span class="token punctuation">:</span> nil
  <span class="token punctuation">)</span>
  <span class="token keyword">let</span> vc <span class="token operator">=</span> <span class="token function">UIViewController<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
  vc<span class="token punctuation">.</span>view <span class="token operator">=</span> rootView
  self<span class="token punctuation">.</span><span class="token function">presentViewController<span class="token punctuation">(</span></span>vc<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> completion<span class="token punctuation">:</span> nil<span class="token punctuation">)</span>
<span class="token punctuation">}</span></div><blockquote><p>Обратите внимание что <code>RCTRootView bundleURL</code> запускает новую JSC VM. Чтобы оптимизировать использование ресурсов и упростить коммуникацию между представлениями React Native в различных частях вашего нативного мобильного приложения, вы можете использовать различные представления React Native, которые связаны с отдельной средой выполнения JS. Чтобы сделать это, используйте <a href="https://github.com/facebook/react-native/blob/master/React/Base/RCTBridge.h#L93" target="_blank"><code>RCTBridge initWithBundleURL</code></a> вместо <code>RCTRootView bundleURL</code>, чтобы создать мост, а затем используйте <code>RCTRootView initWithBridge</code>.</p></blockquote><span><block class="objc" />

</span><blockquote><p>При создании рабочей версии вашего мобильного приложения NSURL может указать на предварительно собранный файл на диске подобным образом <code>[[NSBundle mainBundle] URLForResource:@&quot;main&quot; withExtension:@&quot;jsbundle&quot;];</code>. Чтобы сгенерировать этот файл, вы можете использовать скрипт <code>react-native-xcode.sh</code> из директории <code>node_modules/react-native/packager/</code>.</p></blockquote><span><block class="swift" />

</span><blockquote><p>При создании рабочей версии вашего мобильного приложения NSURL может указывать на предварительно собранный файл на диске подобным образом <code>let mainBundle = NSBundle(URLForResource: &quot;main&quot; withExtension:&quot;jsbundle&quot;)</code>. Чтобы сгенерировать этот файл, вы можете использовать скрипт <code>react-native-xcode.sh</code> из директории <code>node_modules/react-native/packager/</code>.</p></blockquote><span><block class="objc swift" />

</span><h4><a class="anchor" name=""></a>Связка <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h4><p>Свяжите новую ссылку в главном меню с новым методом обработчика событий.</p><p><img src="img/react-native-add-react-native-integration-wire-up.png" alt="Путь события"></p><blockquote><p>Один из самых простых способов сделать это - открыть представление в сценарии и нажать правой кнопкой на новой ссылке. Выберите, например, событие <code>Touch Up Inside</code>, перетащите в сценарий, а затем выберите создаваемый метод из списка.</p></blockquote><h2><a class="anchor" name=""></a>перетащите в сценарий, а затем выберите создаваемый метод из списка <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>Вы проделали все основные шаги, необходимые для интегрирования React Native с вашим приложением. Теперь мы запустим упаковщик React Native чтобы создать пакет <code>index.ios.bundle</code> и сервер, работающий на <code>localhost</code>, чтобы запустить его  .</p><h3><a class="anchor" name="app-transport-security"></a>App Transport Security <a class="hash-link" href="docs/integration-with-existing-apps.html#app-transport-security">#</a></h3><p>Apple блокирует загрузку неявных полнотекстовых ресурсов по HTTP. Поэтому мы должны добавить указанный файл <code>Info.plist</code> (или его эквивалент).</p><div class="prism language-javascript">&lt;key<span class="token operator">&gt;</span>NSAppTransportSecurity&lt;<span class="token operator">/</span>key<span class="token operator">&gt;</span>
&lt;dict<span class="token operator">&gt;</span>
    &lt;key<span class="token operator">&gt;</span>NSExceptionDomains&lt;<span class="token operator">/</span>key<span class="token operator">&gt;</span>
    &lt;dict<span class="token operator">&gt;</span>
        &lt;key<span class="token operator">&gt;</span>localhost&lt;<span class="token operator">/</span>key<span class="token operator">&gt;</span>
        &lt;dict<span class="token operator">&gt;</span>
            &lt;key<span class="token operator">&gt;</span>NSTemporaryExceptionAllowsInsecureHTTPLoads&lt;<span class="token operator">/</span>key<span class="token operator">&gt;</span>
            &lt;<span class="token boolean">true</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        &lt;<span class="token operator">/</span>dict<span class="token operator">&gt;</span>
    &lt;<span class="token operator">/</span>dict<span class="token operator">&gt;</span>
&lt;<span class="token operator">/</span>dict<span class="token operator">&gt;</span></div><h3><a class="anchor" name=""></a>Запустите упаковщик <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h3><div class="prism language-javascript"># В корневой директории вашего проекта<span class="token punctuation">,</span> где расположена папка `node_modules`<span class="token punctuation">.</span>
$ npm start</div><h3><a class="anchor" name=""></a>Запустите мобильное приложение <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h3><p>Запустите сборку с помощью Xcode или вашего избранного редактора, а затем как обычно запустите ваше нативное приложение iOS. Вы также можете запустить мобильное приложение с использованием командной строки:</p><div class="prism language-javascript"># В корневой директории вашего проекта
$ react<span class="token operator">-</span>native run<span class="token operator">-</span>ios</div><p>В нашем примере приложения вы должны увидеть ссылку на &quot;High Scores&quot;, а после нажатия на нее вы сможете увидеть рендеринг вашего компонента React Native..</p><p>Основной экран <em>нативного</em> приложения:</p><p><img src="img/react-native-add-react-native-integration-example-home-screen.png" alt="Основной экран"></p><p>Экран <em>React Native</em>, отображающий экран High Scores:</p><p><img src="img/react-native-add-react-native-integration-example-high-scores.png" alt="High Scores"></p><blockquote><p>Если при запуске мобильного приложения у вас появляются проблемы с определением модуля, пожалуйста, посмотрите <a href="https://github.com/facebook/react-native/issues/4968" target="_blank">возможное описание решения на GitHub</a>. <a href="https://github.com/facebook/react-native/issues/4968#issuecomment-220941717" target="_blank"> Этот комментарий</a> был новейшим решением этой проблемы на момент написания этой версии документации.</p></blockquote><h3><a class="anchor" name=""></a>Посмотреть код <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h3><span><block class="objc" />

</span><p>Вы можете изучить приведенный здесь код на <a href="https://github.com/JoelMarcey/iOS-2048/commit/9ae70c7cdd53eb59f5f7c7daab382b0300ed3585" target="_blank">GitHub</a>.</p><span><block class="swift" />

</span><p>Вы можете изучить приведенный здесь код на <a href="https://github.com/JoelMarcey/swift-2048/commit/13272a31ee6dd46dc68b1dcf4eaf16c1a10f5229" target="_blank">GitHub</a>.</p><span><block class="android" />

</span><h2><a class="anchor" name="js"></a>Добавьте JS в свое мобильное приложение <a class="hash-link" href="docs/integration-with-existing-apps.html#js">#</a></h2><p>В корневом каталоге вашего мобильного приложения запустите:</p><div class="prism language-javascript">$ npm init
$ npm install <span class="token operator">--</span>save react react<span class="token operator">-</span>native
$ curl <span class="token operator">-</span>o <span class="token punctuation">.</span>flowconfig https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>raw<span class="token punctuation">.</span>githubusercontent<span class="token punctuation">.</span>com<span class="token operator">/</span>facebook<span class="token operator">/</span>react<span class="token operator">-</span>native<span class="token regex">/master/</span><span class="token punctuation">.</span>flowconfig</div><p>Этот код создаст модуль nodejs для вашего мобильного приложения и добавит зависимость npm <code>react-native</code>. Теперь откройте только что созданный файл <code>package.json</code> и добавьте следующий код в раздел <code>scripts</code>:</p><div class="prism language-javascript"><span class="token string">&quot;start&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;node node_modules/react-native/local-cli/cli.js start&quot;</span></div><p>Скопируйте и вставьте нижеследующий код в файл <code>index.android.js</code> находящийся в вашем корневом каталоге. Это скелет мобильного приложения React Native:</p><div class="prism language-javascript"><span class="token string">&#x27;use strict&#x27;</span><span class="token punctuation">;</span>

import React from <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
import <span class="token punctuation">{</span>
  AppRegistry<span class="token punctuation">,</span>
  StyleSheet<span class="token punctuation">,</span>
  Text<span class="token punctuation">,</span>
  View
<span class="token punctuation">}</span> from <span class="token string">&#x27;react-native&#x27;</span><span class="token punctuation">;</span>

class <span class="token class-name">HelloWorld</span> extends <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      &lt;View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        &lt;Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>hello<span class="token punctuation">}</span><span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> World&lt;<span class="token operator">/</span>Text<span class="token operator">&gt;</span>
      &lt;<span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create<span class="token punctuation">(</span></span><span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  hello<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fontSize<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    textAlign<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
    margin<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

AppRegistry<span class="token punctuation">.</span><span class="token function">registerComponent<span class="token punctuation">(</span></span><span class="token string">&#x27;HelloWorld&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> HelloWorld<span class="token punctuation">)</span><span class="token punctuation">;</span></div><h2><a class="anchor" name=""></a>Подготовка существующего мобильного приложения <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>In your app&#x27;s <code>build.gradle</code> file add the React Native dependency:</p><div class="prism language-javascript">dependencies <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    compile <span class="token string">&quot;com.facebook.react:react-native:+&quot;</span><span class="token comment" spellcheck="true"> // From node_modules.
</span><span class="token punctuation">}</span></div><blockquote><p>If you want to ensure that you are always using a specific React Native version in your native build, replace <code>+</code> with an actual React Native version you&#x27;ve downloaded from <code>npm</code>.</p></blockquote><p>В файл <code>build.gradle</code> вашего проекта добавьте локальный каталог React Native maven:</p><div class="prism language-javascript">allprojects <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        maven <span class="token punctuation">{</span>
           <span class="token comment" spellcheck="true"> // All of React Native (JS, Android binaries) is installed from npm
</span>            url <span class="token string">&quot;$rootDir/../node_modules/react-native/android&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></div><blockquote><p>Make sure that the path is correct! You shouldn’t run into any “Failed to resolve: com.facebook.react:react-native:0.x.x&quot; errors after running Gradle sync in Android Studio.</p></blockquote><p>Next, make sure you have the Internet permission in your <code>AndroidManifest.xml</code>:</p><div class="prism language-javascript">&lt;uses<span class="token operator">-</span>permission android<span class="token punctuation">:</span>name<span class="token operator">=</span><span class="token string">&quot;android.permission.INTERNET&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></div><p>Это потребуется только в режиме разработки для перезагрузки JavaScript с сервера для разработки. Если необходимо, вы можете убрать этот код в сборке продакшн-версии..</p><h2><a class="anchor" name=""></a>Добавьте нативный код <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>Добавьте нативный код чтобы запустить среду выполнения React Native и заставить ее что-то отобразить. Чтобы это сделать, мы собираемся создать <code>Activity</code>, которая создаст <code>ReactRootView</code>, запустит приложение React и настроит его как основное представление.</p><blockquote><p>If you are targetting Android version &lt;5, use the <code>AppCompatActivity</code> class from the <code>com.android.support:appcompat</code> package instead of <code>Activity</code>.</p><p>If you find out later that your app crashes due to <code>Didn&#x27;t find class &quot;com.facebook.jni.IteratorHelper&quot;</code> exception, uncomment the <code>setUseOldBridge</code> line. <a href="https://github.com/facebook/react-native/issues/8701" target="_blank">See related issue on GitHub.</a></p></blockquote><div class="prism language-javascript">public class <span class="token class-name">MyReactActivity</span> extends <span class="token class-name">Activity</span> implements <span class="token class-name">DefaultHardwareBackBtnHandler</span> <span class="token punctuation">{</span>
    private ReactRootView mReactRootView<span class="token punctuation">;</span>
    private ReactInstanceManager mReactInstanceManager<span class="token punctuation">;</span>

    @Override
    protected void <span class="token function">onCreate<span class="token punctuation">(</span></span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        super<span class="token punctuation">.</span><span class="token function">onCreate<span class="token punctuation">(</span></span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>

        mReactRootView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReactRootView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mReactInstanceManager <span class="token operator">=</span> ReactInstanceManager<span class="token punctuation">.</span><span class="token function">builder<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setApplication<span class="token punctuation">(</span></span><span class="token function">getApplication<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBundleAssetName<span class="token punctuation">(</span></span><span class="token string">&quot;index.android.bundle&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setJSMainModuleName<span class="token punctuation">(</span></span><span class="token string">&quot;index.android&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPackage<span class="token punctuation">(</span></span><span class="token keyword">new</span> <span class="token class-name">MainReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setUseDeveloperSupport<span class="token punctuation">(</span></span>BuildConfig<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setInitialLifecycleState<span class="token punctuation">(</span></span>LifecycleState<span class="token punctuation">.</span>RESUMED<span class="token punctuation">)</span>
               <span class="token comment" spellcheck="true"> //.setUseOldBridge(true) // uncomment this line if your app crashes
</span>                <span class="token punctuation">.</span><span class="token function">build<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mReactRootView<span class="token punctuation">.</span><span class="token function">startReactApplication<span class="token punctuation">(</span></span>mReactInstanceManager<span class="token punctuation">,</span> <span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setContentView<span class="token punctuation">(</span></span>mReactRootView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Override
    public void <span class="token function">invokeDefaultOnBackPressed<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        super<span class="token punctuation">.</span><span class="token function">onBackPressed<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></div><blockquote><p>If you are using a starter kit for React Native, replace the &quot;HelloWorld&quot; string with the one in your index.android.js file (it’s the first argument to the <code>AppRegistry.registerComponent()</code> method).</p></blockquote><p>If you are using Android Studio, use <code>Alt + Enter</code> to add all missing imports in your MyReactActivity class. Be careful to use your package’s <code>BuildConfig</code> and not the one from the <code>...facebook...</code> package.</p><p>We need set the theme of <code>MyReactActivity</code> to <code>Theme.AppCompat.Light.NoActionBar</code> because some components rely on this theme.</p><div class="prism language-javascript">&lt;activity
  android<span class="token punctuation">:</span>name<span class="token operator">=</span><span class="token string">&quot;.MyReactActivity&quot;</span>
  android<span class="token punctuation">:</span>label<span class="token operator">=</span><span class="token string">&quot;@string/app_name&quot;</span>
  android<span class="token punctuation">:</span>theme<span class="token operator">=</span><span class="token string">&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;</span><span class="token operator">&gt;</span>
&lt;<span class="token operator">/</span>activity<span class="token operator">&gt;</span></div><blockquote><p><code>ReactInstanceManager</code> может быть использован совместно различными активностями и/или фрагментами. Вам потребуется создать собственный <code>ReactFragment</code> или <code>ReactActivity</code> и иметь <em>контейнер</em> синглета, который содержит <code>ReactInstanceManager</code>. Когда вам требуется <code>ReactInstanceManager</code> (например, чтобы подключить <code>ReactInstanceManager</code> к жизненному циклу Активностей или Фрагментов), используйте предлагаемый синглет.</p></blockquote><p>Затем нам нужно передать колбэки жизненного цикла Активности в <code>ReactInstanceManager</code>:</p><div class="prism language-javascript">@Override
protected void <span class="token function">onPause<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    super<span class="token punctuation">.</span><span class="token function">onPause<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mReactInstanceManager <span class="token operator">!</span><span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mReactInstanceManager<span class="token punctuation">.</span><span class="token function">onPause<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

@Override
protected void <span class="token function">onResume<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    super<span class="token punctuation">.</span><span class="token function">onResume<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mReactInstanceManager <span class="token operator">!</span><span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mReactInstanceManager<span class="token punctuation">.</span><span class="token function">onResume<span class="token punctuation">(</span></span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

@Override
protected void <span class="token function">onDestroy<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    super<span class="token punctuation">.</span><span class="token function">onDestroy<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mReactInstanceManager <span class="token operator">!</span><span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mReactInstanceManager<span class="token punctuation">.</span><span class="token function">onDestroy<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></div><p>Мы также должны обработать нажатие кнопки &quot;Назад&quot; в React Native:</p><div class="prism language-javascript">@Override
 public void <span class="token function">onBackPressed<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mReactInstanceManager <span class="token operator">!</span><span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mReactInstanceManager<span class="token punctuation">.</span><span class="token function">onBackPressed<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        super<span class="token punctuation">.</span><span class="token function">onBackPressed<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></div><p>Вышеприведенный код позволяет JavaScript управлять тем, что происходит, когда пользователь нажимает аппаратную кнопку &quot;Назад&quot; (например, для реализации навигации). Если JavaScript не обрабатывает нажатие кнопки &quot;Назад&quot;, может быть вызван метод <code>invokeDefaultOnBackPressed</code>. По умолчанию это просто завершит вашу <code>Activity</code>.</p><p>Finally, we need to hook up the dev menu. By default, this is activated by (rage) shaking the device, but this is not very useful in emulators. So we make it show when you press the hardware menu button (use <code>Ctrl + M</code> if you&#x27;re using Android Studio emulator):</p><div class="prism language-javascript">@Override
public boolean <span class="token function">onKeyUp<span class="token punctuation">(</span></span>int keyCode<span class="token punctuation">,</span> KeyEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">==</span> KeyEvent<span class="token punctuation">.</span>KEYCODE_MENU &amp;&amp; mReactInstanceManager <span class="token operator">!</span><span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mReactInstanceManager<span class="token punctuation">.</span><span class="token function">showDevOptionsDialog<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> super<span class="token punctuation">.</span><span class="token function">onKeyUp<span class="token punctuation">(</span></span>keyCode<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></div><p>Вот и все. Теперь ваша Активность готова к запуску кода JavaScript</p><h2><a class="anchor" name=""></a>Запустите ваше мобильное приложение <a class="hash-link" href="docs/integration-with-existing-apps.html#">#</a></h2><p>Чтобы запустить ваше мобильное приложение, нужно сначала запустить сервер разработки. Чтобы сделать это, просто выполните нижеследующую команду из корневого каталога:</p><div class="prism language-javascript">$ npm start</div><p>Now build and run your Android app as normal (<code>./gradlew installDebug</code> from command-line; in Android Studio just create debug build as usual).</p><blockquote><p>If you are using Android Studio for your builds and not the Gradle Wrapper directly, make sure you install <a href="https://facebook.github.io/watchman/" target="_blank">watchman</a> before running <code>npm start</code>. It will prevent the packager from crashing due to conflicts between Android Studio and the React Native packager.</p></blockquote><p>Once you reach your React-powered activity inside the app, it should load the JavaScript code from the development server and display:</p><p><img src="img/EmbeddedAppAndroid.png" alt="Скриншот"></p><span><script>
// Конвертация <div>...<span><block /></span>...</div>
// В форму <div>...<block />...</div>
var blocks = document.getElementsByTagName('block');
for (var i = 0; i < blocks.length; ++i) {
  var block = blocks[i];
  var span = blocks[i].parentNode;
  var container = span.parentNode;
  container.insertBefore(block, span);
  container.removeChild(span);
}
// Конвертация <div>...<block />content<block />...</div>
// В форму <div>...<block>content</block><block />...</div>
blocks = document.getElementsByTagName('block');
for (var i = 0; i < blocks.length; ++i) {
  var block = blocks[i];
  while (block.nextSibling && block.nextSibling.tagName !== 'BLOCK') {
    block.appendChild(block.nextSibling);
  }
}
function display(type, value) {
  var container = document.getElementsByTagName('block')[0].parentNode;
  container.className = 'display-' + type + '-' + value + ' ' +
    container.className.replace(RegExp('display-' + type + '-[a-z]+ ?'), '');
  console.log(container.className);
  event && event.preventDefault();
}

// If we are coming to the page with a hash in it (i.e. from a search, for example), try to get
// us as close as possible to the correct platform and dev os using the hashtag and block walk up.
var foundHash = false;
if (window.location.hash !== '' && window.location.hash !== 'content') { // content is default
  var hashLinks = document.querySelectorAll('a.hash-link');
  for (var i = 0; i < hashLinks.length && !foundHash; ++i) {
    if (hashLinks[i].hash === window.location.hash) {
      var parent = hashLinks[i].parentElement;
      while (parent) {
        if (parent.tagName === 'BLOCK') {
          var targetPlatform = null;
          // Could be more than one target platform, but just choose some sort of order
          // of priority here.

          // Target Platform
          if (parent.className.indexOf('objc') > -1) {
            targetPlatform = 'objc';
          } else if (parent.className.indexOf('swift') > -1) {
            targetPlatform = 'swift';
          } else if (parent.className.indexOf('android') > -1) {
            targetPlatform = 'android';
          } else {
            break; // assume we don't have anything.
          }
          // We would have broken out if both targetPlatform and devOS hadn't been filled.
          display('platform', targetPlatform);
          foundHash = true;
          break;
        }
        parent = parent.parentElement;
      }
    }
  }
}
// Do the default if there is no matching hash
if (!foundHash) {
  var isMac = navigator.platform === 'MacIntel';
  display('platform', isMac ? 'objc' : 'android');
}
</script>

</span><h2><a class="anchor" name="creating-a-release-build-in-android-studio"></a>Creating a release build in Android Studio <a class="hash-link" href="docs/integration-with-existing-apps.html#creating-a-release-build-in-android-studio">#</a></h2><p>You can use Android Studio to create your release builds too! It’s as easy as creating release builds of your previously-existing native Android app. There’s just one additional step, which you’ll have to do before every release build. You need to execute the following to create a React Native bundle, which’ll be included with your native Android app:</p><div class="prism language-javascript">$ react<span class="token operator">-</span>native bundle <span class="token operator">--</span>platform android <span class="token operator">--</span>dev <span class="token boolean">false</span> <span class="token operator">--</span>entry<span class="token operator">-</span>file index<span class="token punctuation">.</span>android<span class="token punctuation">.</span>js <span class="token operator">--</span>bundle<span class="token operator">-</span>output android<span class="token operator">/</span>com<span class="token operator">/</span>your<span class="token operator">-</span>company<span class="token operator">-</span>name<span class="token operator">/</span>app<span class="token operator">-</span>package<span class="token operator">-</span>name<span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token operator">/</span>assets<span class="token operator">/</span>index<span class="token punctuation">.</span>android<span class="token punctuation">.</span>bundle <span class="token operator">--</span>assets<span class="token operator">-</span>dest android<span class="token operator">/</span>com<span class="token operator">/</span>your<span class="token operator">-</span>company<span class="token operator">-</span>name<span class="token operator">/</span>app<span class="token operator">-</span>package<span class="token operator">-</span>name<span class="token operator">/</span>src<span class="token operator">/</span>main<span class="token regex">/res/</span></div><p>Don’t forget to replace the paths with correct ones and create the assets folder if it doesn’t exist!</p><p>Now just create a release build of your native app from within Android Studio as usual and you should be good to go!</p></div><div class="docs-prevnext"><a class="docs-prev" href="docs/more-resources.html#content">← Назад</a><a class="docs-next" href="docs/colors.html#content">Далее →</a></div><p class="edit-page-block">Вы можете <a target="_blank" href="https://github.com/egeshi/react-native/blob/master/docs/IntegrationWithExistingApps.md">отредактировать перевод на GitHub</a> и создать pull request!</p></div></section><footer class="wrap"><div class="center"><a class="twitter-timeline" href="https://twitter.com/search?q=react%20native" data-widget-id="759895038889332736">Твиты о react native</a></div><div class="center">Translation &copy; 2016 <a href="https://ua.linkedin.com/in/egeshi">Antony Repin</a></div><div class="center"><a href="https://twitter.com/antonyrepin" class="twitter-follow-button" data-show-count="false">Follow on Twitter</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><div class="center">Code samples, custom components and original English texts are courtesy of Facebook Inc.</div></footer></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-81752712-1', 'auto');
            ga('send', 'pageview');


            window.twttr = (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0],
                t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function(f) {
              t._e.push(f);
            };

            return t;
          }(document, "script", "twitter-wjs"));


            (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
              try {
                w.yaCounter38813025 = new Ya.Metrika({
                  id:38813025,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
                });
              } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
              d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
          })(document, window, "yandex_metrika_callbacks");


            docsearch({
              apiKey: '18ab1b339ae4030cb2947cb0c4d2fa80',
              indexName: 'reactnative',
              inputSelector: '#algolia-doc-search',
              algoliaOptions: { facetFilters: [ "tags:0.35" ], hitsPerPage: 5 }
            });
          </script><noscript><div><img src="https://mc.yandex.ru/watch/38813025" style="position:absolute; left:-9999px;" alt="" /></div> </noscript><script src="js/scripts.js"></script></body></html>